<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>BudgetBuddy</title>
  <script>
    window.currentPage = 'transactions';
  </script>
  <script>
    const LOCAL_API = 'http://localhost:8081';
  </script>
</head>

<body data-page="transactions" x-data="{
          page: 'transactions',loaded: true, darkMode: false, stickyMenu: false, sidebarToggle: false, scrollTop: false, 
          isTransactionModal: false, isCategoryModal: false, isEditMode: false, editingTransactionId: null,
          newTransaction: { description: '', categoryId: '', date: '', type: 'EXPENSE', isPublic: false, amount: null }, 
          newCategory: { name: '' },
          transactions: [], categories: [],
          filters: { 
            startDate: '', 
            endDate: '', 
            minAmount: '', 
            maxAmount: '', 
            selectedCategories: [], 
            type: '',
            description: ''
          }, 
          showFilters: false, 
          filteredTransactions: [],
          loading: false,
          
          async init() {
            try {
              await this.loadCategories();
              await this.fetchTransactions();
              
              setTimeout(() => {
                this.updateTransactionTable();
              }, 100);
            } catch (error) {
              console.error('Error en la inicialización:', error);
              this.showNotification('Error loading initial data', 'error');
            }
          },
          
          async loadCategories() {
            try {
              const response = await fetch(`${LOCAL_API}/categories`, {
                headers: {
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                }
              });
              if (response.ok) {
                this.categories = await response.json();
              }
            } catch (error) {
              console.error('Error cargando categorías:', error);
            }
          },
          
          async fetchTransactions() {
            this.loading = true;
            try {
              const response = await fetch(`${LOCAL_API}/transactions`, {
                headers: {
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                }
              });
              
              if (response.ok) {
                const serverData = await response.json();
                this.transactions = serverData || [];
                console.log('Transactions loaded:', this.transactions);
                if (this.transactions.length > 0) {
                  console.log('Sample transaction:', this.transactions[0]);
                  console.log('All keys:', Object.keys(this.transactions[0]));
                }
                this.updateTransactionTable();
              } else {
                console.error('Error en la respuesta del servidor:', response.status);
                this.transactions = [];
                this.updateTransactionTable();
                this.showNotification('Error cargando transacciones', 'error');
              }
            } catch (err) {
              console.error('Error cargando transacciones:', err);
              this.transactions = [];
              this.updateTransactionTable();
              this.showNotification('Error cargando transacciones', 'error');
            } finally {
              this.loading = false;
            }
          },
          
          async createTransaction() {
            if (!this.validateTransaction()) return;
            
            try {
              const response = await fetch(`${LOCAL_API}/transactions`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                },
                body: JSON.stringify(this.newTransaction)
              });
              
              if (response.ok) {
                this.showNotification('Transacción creada exitosamente', 'success');
                this.resetForm();
                this.isTransactionModal = false;
                await this.fetchTransactions();
                this.updateTransactionTable();
              } else {
                this.showNotification('Error creando transacción', 'error');
              }
            } catch (err) {
              console.error('Error creando transacción:', err);
              this.showNotification('Error creando transacción', 'error');
            }
          },
          
          async updateTransaction() {
            if (!this.validateTransaction()) return;
            
            try {
              const response = await fetch(`${LOCAL_API}/transactions/${this.editingTransactionId}`, {
                method: 'PUT',
                headers: {
                  'Content-Type': 'application/json',
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                },
                body: JSON.stringify(this.newTransaction)
              });
              
              if (response.ok) {
                this.showNotification('Transaction updated successfully', 'success');
                this.resetForm();
                this.isTransactionModal = false;
                this.isEditMode = false;
                this.editingTransactionId = null;
                await this.fetchTransactions();
                this.updateTransactionTable();
              } else {
                this.showNotification('Error updating transaction', 'error');
              }
            } catch (err) {
              console.error('Error updating transaction:', err);
              this.showNotification('Error updating transaction', 'error');
            }
          },
          
          async deleteTransaction(id) {
            if (!confirm('Are you sure you want to delete this transaction?')) return;
            
            try {
              const response = await fetch(`${LOCAL_API}/transactions/${id}`, {
                method: 'DELETE',
                headers: {
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                }
              });
              
              if (response.ok) {
                this.showNotification('Transaction successfully deleted', 'success');
                await this.fetchTransactions();
                this.updateTransactionTable();
              } else {
                this.showNotification('Error deleting transaction', 'error');
              }
            } catch (err) {
              console.error('Error deleting transaction:', err);
              this.showNotification('Error deleting transaction', 'error');
            }
          },
          
          validateTransaction() {
            if (!this.newTransaction.description.trim()) {
              this.showNotification('Description is required', 'error');
              return false;
            }
            if (!this.newTransaction.categoryId) {
              this.showNotification('Category is required', 'error');
              return false;
            }
            if (!this.newTransaction.date) {
              this.showNotification('Date is required', 'error');
              return false;
            }
            if (!this.newTransaction.amount || this.newTransaction.amount <= 0) {
              this.showNotification('The amount must be greater than 0', 'error');
              return false;
            }
            return true;
          },
          
          resetForm() {
            this.newTransaction = {
              description: '',
              categoryId: '',
              date: '',
              type: 'EXPENSE',
              isPublic: false,
              amount: null,
            };
          },
          
          openNewTransactionModal() {
            this.isEditMode = false;
            this.editingTransactionId = null;
            this.resetForm();
            this.isTransactionModal = true;
          },
          
          closeModal() {
            this.isTransactionModal = false;
            this.isEditMode = false;
            this.editingTransactionId = null;
            this.resetForm();
          },
          
          addTransaction() {
            this.transactions.push({ ...this.newTransaction });
            this.newTransaction = { description: '', categoryId: '', date: '', type: 'EXPENSE', isPublic: false, amount: null };
            this.isTransactionModal = false;
          },
          
          applyFilters() {
            if (!this.transactions || !Array.isArray(this.transactions)) {
              console.error('There are no transactions available to filter.');
              this.showNotification('No transactions available', 'error');
              return;
            }
            
            // Determinar si hay filtros activos
            const hasActiveFilters = this.filters.startDate || this.filters.endDate || 
                                    this.filters.minAmount !== '' || this.filters.maxAmount !== '' ||
                                    this.filters.selectedCategories.length > 0 || this.filters.type !== '' ||
                                    this.filters.description !== '';
            
            // Si no hay filtros activos, mostrar todas las transacciones
            if (!hasActiveFilters) {
              this.updateTransactionTable();
              return;
            }
            
            this.filteredTransactions = this.transactions.filter(tx => {
              let matches = true;
              
              // Filtro por descripción
              if (this.filters.description !== '') {
                const searchTerm = this.filters.description.toLowerCase();
                const description = (tx.description || '').toLowerCase();
                matches = matches && description.includes(searchTerm);
              }
              
              // Filtro por rango de fechas
              if (this.filters.startDate) {
                matches = matches && tx.date >= this.filters.startDate;
              }
              if (this.filters.endDate) {
                matches = matches && tx.date <= this.filters.endDate;
              }
              
              // Filtro por rango de montos
              if (this.filters.minAmount !== '' && this.filters.minAmount !== null) {
                matches = matches && tx.amount >= parseFloat(this.filters.minAmount);
              }
              if (this.filters.maxAmount !== '' && this.filters.maxAmount !== null) {
                matches = matches && tx.amount <= parseFloat(this.filters.maxAmount);
              }
              
              // Filtro por categorías múltiples
              if (this.filters.selectedCategories.length > 0) {
                // Intentar obtener el categoryId de diferentes maneras
                let txCategoryId = '';
                if (tx.categoryId) {
                  txCategoryId = tx.categoryId.toString();
                } else if (tx.category && tx.category.id) {
                  txCategoryId = tx.category.id.toString();
                } else if (tx.category_id) {
                  txCategoryId = tx.category_id.toString();
                } else if (tx.categoryName && this.categories.length > 0) {
                  // Buscar el ID de la categoría por su nombre
                  const category = this.categories.find(cat => cat.name === tx.categoryName);
                  if (category) {
                    txCategoryId = category.id.toString();
                  }
                }
                
                const categoryMatch = this.filters.selectedCategories.includes(txCategoryId);
                console.log('Transaction:', tx.description, 'CategoryName:', tx.categoryName, 'CategoryId:', txCategoryId, 'Selected:', this.filters.selectedCategories, 'Match:', categoryMatch);
                matches = matches && categoryMatch;
              }
              
              // Filtro por tipo
              if (this.filters.type !== '') {
                matches = matches && tx.type === this.filters.type;
              }
              
              return matches;
            });
            
            console.log('Filtered transactions:', this.filteredTransactions.length);
            
            // updating after filtering
            if (window.renderTransactionTable) {
              const transactionsToRender = this.filteredTransactions.length > 0 ? this.filteredTransactions : [];
              const formattedTransactions = transactionsToRender.map(tx => {
                // category name comes from backend
                const categoryName = tx.categoryName || 'No category';

                const shouldHighlight = this.filters.description && 
                          tx.description && 
                          tx.description.toLowerCase().includes(this.filters.description.toLowerCase());
                
                return {
                  id: tx.id,
                  description: tx.description,
                  category: categoryName,
                  categoryId: tx.categoryId,
                  type: tx.type,
                  date: tx.date,
                  visibility: tx.isPublic ? 'Public' : 'Private',
                  amount: `$${tx.amount.toFixed(2)}`,
                  rawAmount: tx.amount,
                  isPublic: tx.isPublic,
                  shouldHighlight: shouldHighlight,
                  searchTerm: this.filters.description || ''
                };
              });
              window.renderTransactionTable(
                formattedTransactions, 1, 5,
                (transaction) => {
                  // Función de edición
                  this.isEditMode = true;
                  this.editingTransactionId = transaction.id;
                  this.newTransaction = {
                    description: transaction.description,
                    categoryId: transaction.categoryId,
                    date: transaction.date,
                    type: transaction.type,
                    isPublic: transaction.isPublic,
                    amount: transaction.rawAmount,
                  };
                  this.isTransactionModal = true;
                },
                (transaction) => {
                  // Función de eliminación
                  this.deleteTransaction(transaction.id);
                }
              );
            }
          },
          
          clearFilters() {
            this.filters = { 
              startDate: '', 
              endDate: '', 
              minAmount: '', 
              maxAmount: '', 
              selectedCategories: [], 
              type: '',
              description: ''
            };
            this.filteredTransactions = [];
            this.updateTransactionTable();
            this.showNotification('Filters cleared', 'success');
          },
          
          toggleCategory(categoryId) {
            if (!categoryId) return;
            
            // Asegurarse de que selectedCategories sea un array
            if (!Array.isArray(this.filters.selectedCategories)) {
              this.filters.selectedCategories = [];
            }
            
            const categoryIdStr = categoryId.toString();
            const index = this.filters.selectedCategories.indexOf(categoryIdStr);
            if (index > -1) {
              this.filters.selectedCategories.splice(index, 1);
            } else {
              this.filters.selectedCategories.push(categoryIdStr);
            }
            
            console.log('Selected categories:', this.filters.selectedCategories);
            console.log('Total transactions:', this.transactions.length);
            
            this.applyFilters();
          },
          
          isCategorySelected(categoryId) {
            if (!categoryId) return false;
            return this.filters.selectedCategories.includes(categoryId.toString());
          },
          
          openCategoryModal() {
            this.isCategoryModal = true;
            this.newCategory = { name: '' };
          },
          
          closeCategoryModal() {
            this.isCategoryModal = false;
            this.newCategory = { name: '' };
          },
          
          async createCategory() {
            if (!this.newCategory.name.trim()) {
              this.showNotification('Please enter the category name', 'error');
              return;
            }
            try {
              // Usa el servicio JS para crear la categoría y actualizar la lista
              const newCategory = await window.categoryService.createCategory(this.newCategory);
              this.categories.push(newCategory);
              this.closeCategoryModal();
              this.showNotification('Categoría creada exitosamente', 'success');
              await this.loadCategories();
              setTimeout(() => {
                window.location.reload();
              }, 500);
            } catch (error) {
              console.error('Error:', error);
              this.showNotification('Error creando la categoría', 'error');
            }
          },
          
          showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
              type === 'success' ? 'bg-green-500 text-white' :
              type === 'error' ? 'bg-red-500 text-white' :
              'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
              notification.remove();
            }, 3000);
          },
          
          updateTransactionTable() {
            if (window.renderTransactionTable && this.transactions && this.transactions.length > 0) {
              const formattedTransactions = this.transactions.map(tx => {
                
                const categoryName = tx.categoryName || 'No category';

                const shouldHighlight = this.filters.description && 
                          tx.description && 
                          tx.description.toLowerCase().includes(this.filters.description.toLowerCase());
                
                return {
                  id: tx.id,
                  description: tx.description,
                  category: categoryName,
                  categoryId: tx.categoryId,
                  type: tx.type,
                  date: tx.date,
                  visibility: tx.isPublic ? 'Public' : 'Private',
                  amount: `$${tx.amount.toFixed(2)}`,
                  rawAmount: tx.amount,
                  isPublic: tx.isPublic,
                  shouldHighlight: shouldHighlight,
                  searchTerm: this.filters.description || ''
                };
              });
              window.renderTransactionTable(
                formattedTransactions, 1, 5,
                (transaction) => {
                 
                  this.isEditMode = true;
                  this.editingTransactionId = transaction.id;
                  this.newTransaction = {
                    description: transaction.description,
                    categoryId: transaction.categoryId,
                    date: transaction.date,
                    type: transaction.type,
                    isPublic: transaction.isPublic,
                    amount: transaction.rawAmount,
                  };
                  this.isTransactionModal = true;
                },
                (transaction) => {
                  
                  this.deleteTransaction(transaction.id);
                }
              );
            } else if (window.renderTransactionTable) {
              
              window.renderTransactionTable([], 1, 5, 
                (transaction) => {
                  
                  this.isEditMode = true;
                  this.editingTransactionId = transaction.id;
                  this.newTransaction = {
                    description: transaction.description,
                    categoryId: transaction.categoryId,
                    date: transaction.date,
                    type: transaction.type,
                    isPublic: transaction.isPublic,
                    amount: transaction.rawAmount,
                  };
                  this.isTransactionModal = true;
                },
                (transaction) => {
                  
                  this.deleteTransaction(transaction.id);
                }
              );
            }
          },
          
          handleSubmit() {
            if (this.isEditMode) {
              this.updateTransaction();
            } else {
              this.createTransaction();
            }
          }
      }" x-init="
      darkMode = JSON.parse(localStorage.getItem('darkMode'));
      $watch('darkMode', value => localStorage.setItem('darkMode', JSON.stringify(value)));
      init();
      " :class="{'dark bg-gray-900': darkMode === true}">
  <!-- ===== Preloader Start ===== -->
  <include src="./partials/preloader.html"></include>
  <!-- ===== Preloader End ===== -->

  <!-- ===== Page Wrapper Start ===== -->
  <div class="flex h-screen overflow-hidden">
    <!-- ===== Sidebar Start ===== -->
    <include src="./partials/sidebar.html"></include>
    <!-- ===== Sidebar End ===== -->

    <!-- ===== Content Area Start ===== -->
    <div class="relative flex flex-col flex-1 overflow-x-hidden">
      <!-- Small Device Overlay Start -->
      <include src="./partials/overlay.html" />
      <!-- Small Device Overlay End -->

      <!-- ===== Header Start ===== -->
      <include src="./partials/header.html" />
      <!-- ===== Header End ===== -->

      <!-- ===== Main Content Start ===== -->
      <main>
        <!-- Tittle -->
        <div class="p-4 md:ml-[15px] mt-4">
          <div class="mb-1">
            <h2 class="text-2xl font-semibold text-gray-800 dark:text-white mb-4">Transactions</h2>
            <span class="text-lg font-normal text-gray-500 dark:text-gray-400">
              Do you want to see your recent financial movements and activities? Find them here
            </span>
          </div>

          <!-- category button -->
          <div class="mt-4 flex gap-2">
            <button @click="openNewTransactionModal()"
              class="inline-flex items-center px-4 py-2 bg-brand-500 hover:bg-brand-600 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:bg-brand-500 dark:hover:bg-brand-600">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
                </path>
              </svg>
              New transaction
            </button>
            <button @click="openCategoryModal()"
              class="inline-flex items-center px-4 py-2 bg-brand-500 hover:bg-brand-600 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:bg-brand-500 dark:hover:bg-brand-600">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
                </path>
              </svg>
              New category
            </button>
            <button @click="showFilters = !showFilters"
              class="inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z">
                </path>
              </svg>
              Filters
            </button>
          </div>
        </div>

        <!-- Advanced Filters Section -->
        <div x-show="showFilters" x-transition class="p-4 mx-auto max-w-7xl">
          <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Advanced Filters</h3>
              <button @click="clearFilters()"
                class="text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-medium">
                Clear all filters
              </button>
            </div>

            <!-- Search by Description -->
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                <svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                Search by Description
              </label>
              <input type="text" x-model="filters.description" @input="applyFilters()"
                class="w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"
                placeholder="Type to search transactions by description..." />
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <!-- Date Range Filter -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date Range</label>
                <div class="space-y-2">
                  <input type="date" x-model="filters.startDate" @change="applyFilters()"
                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"
                    placeholder="Start date" />
                  <input type="date" x-model="filters.endDate" @change="applyFilters()"
                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"
                    placeholder="End date" />
                </div>
              </div>

              <!-- Amount Range Filter -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Amount Range</label>
                <div class="space-y-2">
                  <input type="number" x-model="filters.minAmount" @input="applyFilters()" step="0.01" min="0"
                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"
                    placeholder="Min amount" />
                  <input type="number" x-model="filters.maxAmount" @input="applyFilters()" step="0.01" min="0"
                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"
                    placeholder="Max amount" />
                </div>
              </div>

              <!-- Transaction Type Filter -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Transaction Type</label>
                <select x-model="filters.type" @change="applyFilters()"
                  class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm">
                  <option value="">All types</option>
                  <option value="INCOME">Income</option>
                  <option value="EXPENSE">Expense</option>
                </select>
              </div>
            </div>

            <!-- Categories Filter (Multi-select) -->
            <div class="mt-4">
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Categories</label>
              <div class="flex flex-wrap gap-2">
                <template x-for="category in categories" :key="category.id">
                  <button @click="toggleCategory(category.id)" :class="{
                        'bg-brand-500 text-white border-brand-500': isCategorySelected(category.id),
                        'bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600': !isCategorySelected(category.id)
                      }" class="px-3 py-1.5 text-sm font-medium rounded-full border transition-colors"
                    x-text="category.name"></button>
                </template>
              </div>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
                <span x-text="filters.selectedCategories.length"></span> categories selected
              </p>
            </div>
          </div>
        </div>

<div class="p-4 mx-auto max-w-7xl">
  <div class="flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center gap-2">
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Sort by:</label>
      <select id="sort-field" class="px-3 py-2 border border-gray-300 rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-500 focus:border-transparent">
        <option value="date">Date</option>
        <option value="amount">Amount</option>
        <option value="category">Category</option>
        <option value="type">Type</option>
      </select>
    </div>
    
    <button id="sort-direction" class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 transition-colors focus:ring-2 focus:ring-blue-500 focus:outline-none">
      ↑ Ascendant
    </button>

    <button id="reset-sort" class="px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
    Reset
  </button>
  </div>
</div>

        <!-- table container  -->
        <div class="p-2 mx-auto max-w-7xl">
          <div class="col-span-12 xl:col-span-7">
            <!-- ====== Table One Start ====== -->
            <include src="./partials/table/table-01.html" />
            <!-- ====== Table One End ====== -->
          </div>
        </div>
      </main>
      <!-- ===== Main Content End ===== -->
    </div>
    <!-- ===== Content Area End ===== -->
  </div>
  <!-- ===== Page Wrapper End ===== -->

  <!-- Modal para crear/editar transacción -->
  <include src="./partials/transaction-modal/new-transaction-modal.html" />

  <!-- Modal para crear nueva categoría -->
  <include src="./partials/transaction-modal/new-category-modal.html" />
</body>

</html>